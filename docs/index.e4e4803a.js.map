{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-4e21ee083ffe2b1f.js","../script.ts","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-6ff6ab63e89e9319.js","test.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"iiMhz\\\":\\\"index.e4e4803a.js\\\",\\\"aoxai\\\":\\\"pine.d54da871.webp\\\"}\"));","var slider: HTMLInputElement | undefined;\n\n// canvas related variables\nvar canvas: HTMLCanvasElement | undefined;\nvar canvasContext: CanvasRenderingContext2D | undefined;\nvar canvasWidth: number = 0;\nvar canvasHeight: number = 0;\n\n// image related variables\nvar fit: boolean = true;\nvar img: HTMLImageElement;\nvar imgHeight: number;\nvar imgWidth: number;\nvar scale: number;\nvar baseScale: number = 1;\nvar maxScale: number = 5;\nvar minScale: number = 1;\nvar originalWidth: number;\nvar originalHeight: number;\nvar ratio: number;\n\n// Pointer drag related variables\nvar isDown: boolean;\nvar pointerX: number, pointerY: number;\n\n// the accumulated horizontal(X) & vertical(Y) panning the user has done in total\nvar netPanningX: number;\nvar netPanningY: number;\n\n\n// zoom and pinch related variables\nlet originX: number, originY: number;\nvar eventCache: PointerEvent[];\nvar prevDiff: number;\n\n// define function to clamp number\nfunction clamp(num: number, from: number, to: number) {\n  return Math.max(from, Math.min(num, to));\n}\n\n// define debounce function\nfunction debounce<Params extends any[]>(func: (...args: Params) => any, timeout: number,): (...args: Params) => void {\n  let timer: NodeJS.Timeout\n  return (...args: Params) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      func(...args)\n    }, timeout)\n  }\n}\n\n//\nfunction initPointerAndZoom() {\n  isDown = false;\n  netPanningX = 0;\n  netPanningY = 0;\n  eventCache = [];\n  prevDiff = -1;\n  if (slider) slider.value = String(baseScale)\n}\n\n// draw image\nfunction draw() {\n  canvasContext?.clearRect(0, 0, canvasWidth, canvasHeight);\n  canvasContext?.drawImage(img, netPanningX, netPanningY, imgWidth, imgHeight);\n}\n\n// fix range \nfunction fixScale() {\n  if (fit)\n    scale = Math.min(imgWidth / canvasWidth, imgWidth / canvasHeight) || baseScale;\n  else\n    scale = Math.min(imgWidth / originalWidth, imgWidth / originalHeight) || baseScale;\n  if (slider) slider.value = String(scale);\n}\n\n// recalculate images related variables\nfunction onImageLoad() {\n  if (fit) {\n    scale = Math.max(canvasHeight / imgHeight, canvasWidth / imgWidth);\n    imgHeight *= scale;\n    imgWidth *= scale;\n  }\n  pointerX = pointerY = 0;\n  originalWidth = imgWidth;\n  originalHeight = imgHeight;\n  ratio = originalHeight / originalWidth;\n  draw();\n}\n\n// get the median point of pointers\nfunction getPointerAverage() {\n  let x = 0, y = 0;\n  for (var i = 0; i < eventCache.length; i++) {\n    x += eventCache[i].offsetX;\n    y += eventCache[i].offsetY;\n  }\n  x = x / eventCache.length;\n  y = y / eventCache.length;\n  return [x, y]\n}\n\n// calc origin for zoom and pinch\nfunction calcOrigin(x: number, y: number) {\n  originX = (-netPanningX + x) / imgWidth;\n  originY = (-netPanningY + y) / imgHeight;\n}\n\nexport function move(x: number, y: number) {\n  // the last mousemove event\n  var dx = x - pointerX;\n  var dy = y - pointerY;\n  // reset the vars for next mousemove\n  pointerX = x;\n  pointerY = y;\n  // accumulate the net panning done\n  netPanningX = fit ? clamp(netPanningX + dx, canvasWidth - imgWidth, 0) : netPanningX + dx;\n  netPanningY = fit ? clamp(netPanningY + dy, canvasHeight - imgHeight, 0) : netPanningY + dy;\n}\n\nfunction drawZoom(deltaX: number, deltaY: number) {\n  netPanningX = fit ? clamp(netPanningX - deltaX * originX, canvasWidth - imgWidth, 0) : netPanningX - deltaX * originX;\n  netPanningY = fit ? clamp(netPanningY - deltaY * originY, canvasHeight - imgHeight, 0) : netPanningY - deltaY * originY;\n}\n\nfunction zoomDelta(deltaX: number, deltaY: number) {\n  const newWidth = imgWidth + deltaX;\n  if (newWidth < originalWidth || imgHeight + deltaY < originalHeight) return;\n  if (newWidth / originalWidth > maxScale || newWidth / originalWidth < minScale) return;\n  if (slider) slider.value = String(scale = newWidth / originalWidth)\n  // calc new size\n  imgWidth = newWidth;\n  imgHeight += deltaY;\n  // accumulate the net panning done\n  drawZoom(deltaX, deltaY);\n}\n\nfunction zoomScale(scale: number) {\n  if (scale > maxScale || scale < minScale) return;\n  prevDiff = -1;\n  let deltaX = imgWidth;\n  let deltaY = imgHeight;\n  // calc new size\n  imgWidth = originalWidth * scale;\n  imgHeight = originalHeight * scale;\n  // calc diff\n  deltaX -= imgWidth;\n  deltaY -= imgHeight;\n  //\n  calcOrigin(canvasWidth / 2, canvasHeight / 2);\n  drawZoom(-deltaX, -deltaY)\n}\n\nfunction pinch() {\n  if (eventCache.length == 2) {\n    // Calculate the distance between the two pointers\n    var curDiff = Math.hypot(eventCache[0].offsetX - eventCache[1].offsetX, eventCache[0].offsetY - eventCache[1].offsetY);\n    // zoom into image\n    if (prevDiff > 0) {\n      const delta = curDiff - prevDiff;\n      zoomDelta(delta, delta * ratio)\n    }\n    prevDiff = curDiff;\n  }\n}\n\n/* -------------------------------------------------------------------------- */\n/*                               Event Handlers                               */\n/* -------------------------------------------------------------------------- */\n\nfunction onSliderMove(e: Event) {\n  const value = (e.target as HTMLInputElement).value;\n  scale = +value;\n  zoomScale(scale);\n  draw();\n};\n\nfunction onPointerdown(e: PointerEvent) {\n  // This event is cached to support 2-finger gestures\n  eventCache.push(e);\n  // refresh move origin\n  [pointerX, pointerY] = getPointerAverage();\n  isDown = true;\n};\n\nfunction onPointerUp(e: PointerEvent) {\n  // If the number of pointers down is less than two then reset diff tracker\n  eventCache = eventCache.filter(ev => ev.pointerId != e.pointerId)\n  if (eventCache.length < 2) {\n    prevDiff = -1;\n  }\n  [pointerX, pointerY] = getPointerAverage();\n  if (eventCache.length == 0) isDown = false;\n};\n\nfunction onPointermove(e: PointerEvent) {\n  if (!isDown) return;\n  // Find this event in the cache and update its record with this event\n  for (var i = 0; i < eventCache.length; i++)\n    if (e.pointerId == eventCache[i].pointerId) {\n      eventCache[i] = e; break;\n    }\n  // calc x,y and\n  let [x, y] = getPointerAverage();\n  move(x, y);\n  pinch();\n  calcOrigin(canvasWidth / 2, canvasHeight / 2);\n  draw();\n};\n\nconst onResize = debounce<[]>(() => {\n  const deltaX = canvas.offsetWidth - canvasWidth;\n  const deltaY = canvas.offsetHeight - canvasHeight;\n  canvasWidth = canvas.width = canvas.offsetWidth;\n  canvasHeight = canvas.height = canvas.offsetHeight;\n  if (fit && imgWidth < canvasWidth) {\n    netPanningX = 0;\n    onImageLoad();\n  } else if (fit && imgHeight < canvasHeight) {\n    netPanningY = 0;\n    onImageLoad();\n  } else {\n    netPanningX += deltaX / 2;\n    netPanningY += deltaY / 2;\n    originalWidth = canvasWidth;\n    originalHeight = canvasWidth * ratio;\n    draw();\n  }\n  fixScale();\n}, 300)\n\nfunction prevent(e: Event) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nfunction leadListeners() {\n  canvas.addEventListener('pointerdown', (e) => { prevent(e); onPointerdown(e) });\n  canvas.addEventListener('pointermove', (e) => { prevent(e); onPointermove(e) });\n  canvas.addEventListener('pointerout', (e) => { prevent(e); onPointerUp(e) })\n  canvas.addEventListener('pointerup', (e) => { prevent(e); onPointerUp(e) })\n  canvas.addEventListener('pointercancel', (e) => { prevent(e); onPointerUp(e) })\n  canvas.addEventListener('pointerleave', (e) => { prevent(e); onPointerUp(e) })\n  new ResizeObserver(onResize).observe(canvas);\n}\n\n/* -------------------------------------------------------------------------- */\n/*                                   Loading                                  */\n/* -------------------------------------------------------------------------- */\n\nexport function loadSlider(el: HTMLInputElement) {\n  slider = el;\n  slider.value = String(scale || baseScale);\n  slider.addEventListener('input', (e) => { prevent(e); onSliderMove(e) });\n}\n\nexport function loadCanvas(el: HTMLCanvasElement, width?: number, height?: number) {\n  canvas = el;\n  canvasContext = canvas.getContext(\"2d\");\n  canvasWidth = canvas.width = width || canvas.offsetWidth;\n  canvasHeight = canvas.height = height || canvas.offsetHeight;\n  leadListeners();\n}\n\nexport function loadImageFromUrl(url: string, fitImage: boolean = true, onload?: () => void) {\n  if (!canvas) throw Error('first call loadCanvas');\n  fit = fitImage;\n  img = new Image();\n  img.onload = () => {\n    initPointerAndZoom();\n    imgHeight = img.naturalHeight;\n    imgWidth = img.naturalWidth;\n    onImageLoad();\n    onload?.();\n  };\n  img.src = url;\n}\n\n/* -------------------------------------------------------------------------- */\n/*                                   Export                                   */\n/* -------------------------------------------------------------------------- */\n\nexport function getDataUrl(scale: number = 1) {\n  var canvas = document.createElement('canvas');\n  canvas.width = canvasWidth * scale;\n  canvas.height = canvasHeight * scale;\n  var context = canvas.getContext('2d');\n  context.drawImage(img, netPanningX * scale, netPanningY * scale, imgWidth * scale, imgHeight * scale);\n  return canvas.toDataURL();\n}\n\nexport function download(scale: number = 1) {\n  const link = document.createElement('a');\n  link.download = 'canvas.png';\n  link.href = getDataUrl(scale);\n  link.click();\n}\n\nexport function getCropInfo() {\n  return ({\n    width: imgWidth,\n    imgHeight: imgHeight,\n    x: netPanningX,\n    y: netPanningY\n  })\n}","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('iiMhz') + require('./helpers/bundle-manifest').resolve(\"aoxai\");","import image from './pine.webp';\r\nimport { download, loadCanvas, loadImageFromUrl, loadSlider } from '../script';\r\n\r\nfunction prevent(e: Event) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\n\r\nloadCanvas(document.getElementById('canvas') as HTMLCanvasElement);\r\nloadImageFromUrl(image, true);\r\nloadSlider(document.getElementById(\"myRange\") as HTMLInputElement);\r\nvar filePicker: HTMLInputElement = <HTMLInputElement>document.getElementById(\"filePicker\");\r\nfunction loadImageFile() {\r\n    var file = (filePicker as HTMLInputElement).files?.[0];\r\n    if (!file) return\r\n    var fr = new FileReader();\r\n    fr.onload = () => loadImageFromUrl(String(fr.result));\r\n    fr.readAsDataURL(file);\r\n}\r\nfilePicker.addEventListener('change', (e) => { prevent(e); loadImageFile() });\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                    page                                    */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nconst dropdown = document.getElementById(\"dropdown\");\r\n\r\ndocument.getElementById(\"menu\").addEventListener('click', () => {\r\n    dropdown.classList.toggle('hidden');\r\n});\r\n\r\ndocument.getElementById(\"download\").addEventListener('click', () => {\r\n    download(2)\r\n});"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$dd535ca4f161956d$var$slider","$dd535ca4f161956d$var$canvas","$dd535ca4f161956d$var$canvasContext","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","value","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","$32b01dc9b2fa45c9$exports","getBundleURL","resolve","$dd535ca4f161956d$var$img","$dd535ca4f161956d$var$imgHeight","$dd535ca4f161956d$var$imgWidth","$dd535ca4f161956d$var$scale","$dd535ca4f161956d$var$originalWidth","$dd535ca4f161956d$var$originalHeight","$dd535ca4f161956d$var$ratio","$dd535ca4f161956d$var$isDown","$dd535ca4f161956d$var$pointerX","$dd535ca4f161956d$var$pointerY","$dd535ca4f161956d$var$netPanningX","$dd535ca4f161956d$var$netPanningY","$dd535ca4f161956d$var$canvasWidth","$dd535ca4f161956d$var$canvasHeight","$dd535ca4f161956d$var$fit","$dd535ca4f161956d$var$originX","$dd535ca4f161956d$var$originY","$dd535ca4f161956d$var$eventCache","$dd535ca4f161956d$var$prevDiff","$dd535ca4f161956d$var$clamp","num","from","to","Math","max","min","$dd535ca4f161956d$var$draw","clearRect","drawImage","$dd535ca4f161956d$var$onImageLoad","$dd535ca4f161956d$var$getPointerAverage","x","y","offsetX","offsetY","$dd535ca4f161956d$var$calcOrigin","$dd535ca4f161956d$var$drawZoom","deltaX","deltaY","$dd535ca4f161956d$var$pinch","curDiff","hypot","delta","newWidth","String","$dd535ca4f161956d$var$zoomDelta","$dd535ca4f161956d$var$onSliderMove","e","target","scale","$dd535ca4f161956d$var$zoomScale","$dd535ca4f161956d$var$onPointerUp","filter","ev","pointerId","$dd535ca4f161956d$var$onPointermove","dx","dy","$dd535ca4f161956d$export$d947e5f4f4c48d48","$dd535ca4f161956d$var$onResize","func","timeout","timer","args","clearTimeout","setTimeout","$dd535ca4f161956d$var$debounce","offsetWidth","offsetHeight","width","height","$dd535ca4f161956d$var$prevent","preventDefault","stopPropagation","$dd535ca4f161956d$var$leadListeners","addEventListener","push","$dd535ca4f161956d$var$onPointerdown","ResizeObserver","observe","$dd535ca4f161956d$export$7dc0d71d95f22484","fitImage","onload","Image","naturalHeight","naturalWidth","src","$dd535ca4f161956d$export$24422be91ad4011f","link","document","createElement","download","href","canvas","getContext","toDataURL","$dd535ca4f161956d$export$4631f9310db9e583","click","el","getElementById","$parcel$interopDefault","$dd535ca4f161956d$export$eddf944f3870013a","$7372b7044736ab82$var$filePicker","$7372b7044736ab82$var$prevent","file","files","fr","FileReader","result","readAsDataURL","$7372b7044736ab82$var$loadImageFile","$7372b7044736ab82$var$dropdown","classList","toggle"],"version":3,"file":"index.e4e4803a.js.map"}